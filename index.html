<!DOCTYPE html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <title>Flashcards</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="app">
      <!-- LOGIN-VY -->
      <section id="loginView" class="login-view">
        <div class="login-card">
          <h2>Logga in</h2>
          <p class="login-subtitle">Endast f√∂r dig üíô</p>

          <label>
            E-post:
            <input type="email" id="loginEmail" placeholder="din e-post" />
          </label>

          <label>
            L√∂senord:
            <input
              type="password"
              id="loginPassword"
              placeholder="ditt l√∂senord"
            />
          </label>

          <div id="loginError" class="login-error hidden">
            Fel e-post eller l√∂senord.
          </div>

          <button id="loginBtn" class="btn btn-primary">Logga in</button>
        </div>
      </section>

      <!-- RESTEN AV APPEN (g√∂ms tills man √§r inloggad) -->
      <div id="appContainer" class="hidden">
        <header class="header">
          <h1>Flashcards</h1>
        </header>

        <main class="main">
          <!-- HEMSK√ÑRM: bara mappar -->
          <section id="homeView" class="home-view">
            <div class="home-header">
              <div>
                <h2>Mina mappar</h2>
                <p class="home-subtitle">
                  V√§lj en kurs eller skapa en ny mapp.
                </p>
              </div>
              <div class="home-actions">
                <button id="addCourseBtn" class="btn btn-primary">
                  + Ny mapp
                </button>

                <button id="exportDataBtn" class="btn btn-secondary btn-sm">
                  Exportera backup
                </button>

                <label class="btn btn-secondary btn-sm file-btn">
                  Importera backup
                  <input
                    type="file"
                    id="importDataInput"
                    accept=".json,.txt"
                    hidden
                  />
                </label>
              </div>
            </div>

            <div id="homeEmpty" class="empty-state">
              <p>Du har inga mappar √§nnu. Skapa en ny f√∂r att b√∂rja.</p>
            </div>

            <ul id="courseList" class="course-list"></ul>
          </section>

          <!-- KURSSK√ÑRM: flashcards i en mapp -->
          <section id="courseView" class="course-view hidden">
            <div class="course-header">
              <div class="course-header-left">
                <button id="backHomeBtn" class="btn btn-secondary btn-sm">
                  ‚Üê Till mappar
                </button>
                <h2 id="courseTitle"></h2>
              </div>
              <div class="course-actions">
                <button id="studyBtn" class="btn btn-primary">√ñva</button>
                <button id="addCardBtn" class="btn btn-secondary">
                  + Nytt flashcard
                </button>
                <button id="deleteCourseBtn" class="btn btn-danger">
                  Ta bort mapp
                </button>
              </div>
            </div>

            <div id="cardListContainer">
              <table class="card-table">
                <thead>
                  <tr>
                    <th>Fr√•ga</th>
                    <th>Svar (text)</th>
                    <th>Bild?</th>
                    <th>√Ötg√§rder</th>
                  </tr>
                </thead>
                <tbody id="cardList"></tbody>
              </table>
              <div id="noCardsMessage" class="empty-state small">
                <p>Inga flashcards √§nnu. Skapa ett nytt!</p>
              </div>
            </div>
          </section>

          <!-- STUDYSK√ÑRM: ett kort i taget -->
          <section id="studyView" class="study-view hidden">
            <div class="study-header">
              <button id="backToCourseBtn" class="btn btn-secondary btn-sm">
                ‚Üê Till mappen
              </button>
              <div class="study-info">
                <span id="studyProgress"></span>
                <button id="restartStudyBtn" class="btn btn-secondary btn-sm">
                  B√∂rja om flashcards
                </button>
              </div>
            </div>

            <div id="studyCardContainer" class="study-card-container">
              <div id="studyCard" class="study-card">
                <div id="studyCardInner" class="study-card-inner">
                  <div class="study-card-face study-card-front">
                    <div id="studyQuestion" class="study-question"></div>
                    <div class="study-hint">Tryck f√∂r att v√§nda kortet.</div>
                  </div>
                  <div class="study-card-face study-card-back">
                    <div
                      id="studyAnswerContainer"
                      class="study-answer-container"
                    >
                      <div id="studyAnswerText" class="study-answer-text"></div>
                      <img
                        id="studyAnswerImage"
                        class="study-answer-image hidden"
                        alt="Svarbild"
                      />
                    </div>
                    <div class="study-hint">Tryck f√∂r att se fr√•gan igen.</div>
                  </div>
                </div>
              </div>
            </div>

            <div id="studyFinished" class="study-finished hidden">
              <h3>Klart!</h3>
              <p id="studyFinishedText"></p>
              <button id="studyRestartAllBtn" class="btn btn-primary">
                B√∂rja om alla flashcards
              </button>
            </div>
          </section>
        </main>
      </div>
    </div>

    <!-- Dialog: Ny mapp -->
    <div id="courseModal" class="modal hidden">
      <div class="modal-content">
        <h3>Ny mapp</h3>
        <label>
          Namn:
          <input
            type="text"
            id="courseNameInput"
            placeholder="t.ex. Matte 1c"
          />
        </label>
        <div class="modal-actions">
          <button id="cancelCourseBtn" class="btn btn-secondary">Avbryt</button>
          <button id="saveCourseBtn" class="btn btn-primary">Spara</button>
        </div>
      </div>
    </div>

    <!-- Dialog: Nytt/Redigera flashcard -->
    <div id="cardModal" class="modal hidden">
      <div class="modal-content">
        <h3 id="cardModalTitle">Nytt flashcard</h3>

        <label>
          Fr√•ga:
          <textarea
            id="cardQuestionInput"
            rows="2"
            placeholder="Fr√•ga..."
          ></textarea>
        </label>

        <label>
          Text-svar (valfritt):
          <textarea
            id="cardAnswerInput"
            rows="3"
            placeholder="Svar i text..."
          ></textarea>
        </label>

        <label>
          Bild som svar (valfritt):
          <input type="file" id="cardImageInput" accept="image/*" />
        </label>

        <div id="cardImagePreviewContainer" class="image-preview hidden">
          <p>Nuvarande bild:</p>
          <img id="cardImagePreview" alt="F√∂rhandsvisning" />
          <button id="removeImageBtn" class="btn btn-secondary btn-sm">
            Ta bort bild
          </button>
        </div>

        <div class="modal-actions">
          <button id="cancelCardBtn" class="btn btn-secondary">Avbryt</button>
          <button id="saveCardBtn" class="btn btn-primary">Spara</button>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
